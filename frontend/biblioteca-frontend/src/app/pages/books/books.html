<h1 class="book-title">Libros de la Edad Media</h1>

<ul class="book-list">
  <li *ngFor="let book of books()" class="book-card">
    <img [src]="book.imagen" alt="{{ book.titulo }}" class="book-image" />

    <h3 class="book-name">{{ book.titulo }}</h3>
    <p ><strong>Autor:</strong> {{ book.autor }}</p>
    <p><strong>G√©nero:</strong> {{ book.genero }}</p>
    <p><strong>A√±o:</strong> {{ book['a√±o'] }}</p>
    <p><strong>Descripci√≥n:</strong> {{ book.descripcion }}</p>
    <p><strong>Ubicaci√≥n f√≠sica:</strong> {{ book.ubicacionFisica }}</p>

    <div *ngIf="book.pdf">
      <a [href]="book.pdf" target="_blank" class="pdf-link">üìÑ Leer PDF</a>
    </div>

    <div *ngIf="book.enlaceCompra && book.enlaceCompra.length > 0">
      <p><strong>Enlaces de compra:</strong></p>
      <ul>
        <li *ngFor="let link of book.enlaceCompra">
          <a [href]="link" target="_blank" class="buy-link">{{ link }}</a>
        </li>
      </ul>
    </div>

    <button (click)="openFavoriteForm(book)" title="Agregar a favoritos" class="fav-button">‚≠ê</button>

    <div *ngIf="selectedItem === book" class="favorite-form">
      <h3>Agregar "{{ selectedItem?.titulo }}" a favoritos</h3>

      <label>
        Nota personal:
        <input [(ngModel)]="note" placeholder="Escribe una nota..." />
      </label>

      <label>
        Calificaci√≥n:
        <input type="number" [(ngModel)]="rating" min="1" max="5" />
      </label>

      <button (click)="addFavorite()">üíæ Guardar</button>
      <button (click)="cancelFavorite()">‚ùå Cancelar</button>
    </div>

    <hr />
  </li>
</ul>

